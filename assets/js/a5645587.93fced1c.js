"use strict";(self.webpackChunknemesisdb=self.webpackChunknemesisdb||[]).push([[3609],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=p(n),c=r,f=u["".concat(l,".").concat(c)]||u[c]||m[c]||s;return n?a.createElement(f,i(i({ref:t},d),{},{components:n})):a.createElement(f,i({ref:t},d))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,i=new Array(s);i[0]=c;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:r,i[1]=o;for(var p=2;p<s;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5326:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>s,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const s={sidebar_position:25,displayed_sidebar:"homeSidebar"},i="Persist Data",o={unversionedId:"home/persist",id:"home/persist",title:"Persist Data",description:"NemesisDB is an in-memory/cache database meaning all the data is always stored in RAM. This offers performance benefits but it also means if the server shutdowns all the data is lost.",source:"@site/docs/home/persist.md",sourceDirName:"home",slug:"/home/persist",permalink:"/home/persist",draft:!1,tags:[],version:"current",sidebarPosition:25,frontMatter:{sidebar_position:25,displayed_sidebar:"homeSidebar"},sidebar:"homeSidebar",previous:{title:"Client APIs",permalink:"/home/client-apis"}},l={},p=[{value:"Save",id:"save",level:2},{value:"Restore: Startup",id:"restore-startup",level:2},{value:"Restore: Runtime",id:"restore-runtime",level:2}],d={toc:p},u="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"persist-data"},"Persist Data"),(0,r.kt)("p",null,"NemesisDB is an in-memory/cache database meaning all the data is always stored in RAM. This offers performance benefits but it also means if the server shutdowns all the data is lost."),(0,r.kt)("p",null,"Key value data can be persisted to the filesystem and restored on startup or at runtime."),(0,r.kt)("p",null,"More details are available in ",(0,r.kt)("a",{parentName:"p",href:"/tutorials/persist-data/overview"},"Persist"),"."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"save"},"Save"),(0,r.kt)("p",null,"Data is saved to the filesystem using ",(0,r.kt)("inlineCode",{parentName:"p"},"SH_SAVE"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "SH_SAVE":\n  {\n    "name":"mydata"\n  }\n}\n')),(0,r.kt)("p",null,"Data is saved to ",(0,r.kt)("inlineCode",{parentName:"p"},"session::save::path"),". "),(0,r.kt)("p",null,"This commands saves all sessions but you can also save specific sessions by setting tokens:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "SH_SAVE":\n  {\n    "name":"mydata",\n    "tkns":[782729387182638, 1183740548782]\n  }\n}\n')),(0,r.kt)("p",null,"This saves the data for the two sessions with those session tokens."),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"restore-startup"},"Restore: Startup"),(0,r.kt)("p",null,"To restore data at startup use the ",(0,r.kt)("inlineCode",{parentName:"p"},"--loadName")," switch:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"./nemesisdb --config=default.json --loadName=mydata\n")),(0,r.kt)("p",null,"This expects to find ",(0,r.kt)("inlineCode",{parentName:"p"},"mydata")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"session::save::path")," set in the server config. This can be overridden with ",(0,r.kt)("inlineCode",{parentName:"p"},"--loadPath"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"./nemesisdb --config=default.json --loadName=mydata --loadPath=/some/other/path\n")),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"restore-runtime"},"Restore: Runtime"),(0,r.kt)("p",null,"Data can be loaded at runtime with ",(0,r.kt)("inlineCode",{parentName:"p"},"SH_LOAD"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "SH_LOAD":\n  {\n    "name":"mydata"\n  }\n}\n')),(0,r.kt)("p",null,"This expects to find the data in the ",(0,r.kt)("inlineCode",{parentName:"p"},"session::save::path"),"."))}m.isMDXComponent=!0}}]);